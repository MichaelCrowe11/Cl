(()=>{var e={};e.id=700,e.ids=[700],e.modules={452:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1892:()=>{},2511:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>P,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var n={};o.r(n),o.d(n,{GET:()=>u,POST:()=>c});var s=o(9234),a=o(3275),r=o(8010),p=o(7363);let i={"gpt-4":{name:"GPT-4",endpoint:process.env.OPENAI_API_ENDPOINT||"https://api.openai.com/v1/chat/completions",apiKey:process.env.OPENAI_API_KEY,type:"openai"},"gpt-4-turbo":{name:"GPT-4 Turbo",endpoint:process.env.OPENAI_API_ENDPOINT||"https://api.openai.com/v1/chat/completions",apiKey:process.env.OPENAI_API_KEY,type:"openai"},"gpt-3.5-turbo":{name:"GPT-3.5 Turbo",endpoint:process.env.OPENAI_API_ENDPOINT||"https://api.openai.com/v1/chat/completions",apiKey:process.env.OPENAI_API_KEY,type:"openai"},"claude-3-opus":{name:"Claude 3 Opus",endpoint:process.env.ANTHROPIC_API_ENDPOINT||"https://api.anthropic.com/v1/messages",apiKey:process.env.ANTHROPIC_API_KEY,type:"anthropic"},"claude-3-sonnet":{name:"Claude 3 Sonnet",endpoint:process.env.ANTHROPIC_API_ENDPOINT||"https://api.anthropic.com/v1/messages",apiKey:process.env.ANTHROPIC_API_KEY,type:"anthropic"},"claude-3-haiku":{name:"Claude 3 Haiku",endpoint:process.env.ANTHROPIC_API_ENDPOINT||"https://api.anthropic.com/v1/messages",apiKey:process.env.ANTHROPIC_API_KEY,type:"anthropic"},default:{name:"Default Model",endpoint:process.env.DEFAULT_AI_ENDPOINT,apiKey:process.env.DEFAULT_AI_API_KEY,type:"openai"}};async function c(e){try{let{prompt:t,model:o="claude-3-opus",temperature:n=.3,max_tokens:s=4096,system_prompt:a}=await e.json(),r=i[o];if(!r)return p.NextResponse.json({error:"Invalid model specified"},{status:400});if(r.endpoint){let e,i,c,u;if("anthropic"===r.type?(i={model:o,messages:[{role:"user",content:t}],system:a||"You are an expert mycology assistant with deep knowledge of fungal biotechnology, substrate optimization, and cultivation techniques.",max_tokens:s,temperature:n},e=await fetch(r.endpoint,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey||"","anthropic-version":process.env.ANTHROPIC_API_VERSION||"2023-06-01"},body:JSON.stringify(i)})):(i={messages:[{role:"system",content:a||"You are an expert mycology assistant with deep knowledge of fungal biotechnology, substrate optimization, and cultivation techniques."},{role:"user",content:t}],model:o,temperature:n,max_tokens:s},e=await fetch(r.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`,...process.env.OPENAI_ORG_ID&&{"OpenAI-Organization":process.env.OPENAI_ORG_ID}},body:JSON.stringify(i)})),!e.ok)throw await e.json().catch(()=>({})),Error(`AI model error: ${e.statusText}`);let d=await e.json();"anthropic"===r.type?(c=d.content?.[0]?.text||"No response generated",u={prompt_tokens:d.usage?.input_tokens||0,completion_tokens:d.usage?.output_tokens||0,total_tokens:(d.usage?.input_tokens||0)+(d.usage?.output_tokens||0)}):(c=d.choices?.[0]?.message?.content||"No response generated",u=d.usage);let l={response:c,model:r.name,usage:u};return p.NextResponse.json(l)}let c={response:`[${r.name}] Processing: "${t}"

This is a placeholder response. Configure your AI model endpoint in the environment variables.`,model:r.name,usage:{prompt_tokens:t.length,completion_tokens:100,total_tokens:t.length+100}};return p.NextResponse.json(c)}catch(e){return p.NextResponse.json({error:"Failed to process AI request"},{status:500})}}async function u(){let e=Object.entries(i).map(([e,t])=>({id:e,name:t.name,available:!!t.endpoint}));return p.NextResponse.json({models:e})}let d=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ai/route",pathname:"/api/ai",filename:"route",bundlePath:"app/api/ai/route"},resolvedPagePath:"/workspaces/Cl/app/api/ai/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:h}=d;function P(){return(0,r.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[511,940],()=>o(2511));module.exports=n})();